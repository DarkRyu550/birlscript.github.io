<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- CodeMirror stuff -->
    <link rel="shortcut icon" type="image/png" href="image/favicon.png"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css">
    <script type="text/javascript" src="https://cdn.rawgit.com/codemirror/CodeMirror/master/lib/codemirror.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/xml/xml.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/themes/main.css">
    <script src="javascripts/modes/javascript.js"></script>
    <title>BIRLSCRIPT</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>BIRLSCRIPT</h1>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/birlscript/birlscript" id="view-on-github" class="button"><span>Veja no GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
            <a id="birlscript" class="anchor" href="#birlscript" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BIRLSCRIPT</h1>
            <p>É a linguagem de programação dos codebuilders, que não saem de casa sem codar pra caralho!</p>
            <br>
            <p>Se você se sente apto pro desafio, vá em frente e teste no console abaixo. Veja <a href="#">tutoriais e mais exemplos</a>.</p>
            
          <div id="header">
            <center>
                <h3 id="name">BIRLSCRIPT - A Linguagem dos codebuilders</h3>
                <a href="https://github.com/birl-language/birlscript"><h5 id="repo-link">Repositório no GitHub</h5></a>
            </center>
          </div>
        <textarea id="code" name="code"></textarea>
        <br>
        <center>
            <textarea id="result" readonly>Aguardando...</textarea>
            <br>
            <input type="submit" class="button" name="insert" value="Rodar" />
        </center>
        </section>

        <footer>
          Copyleft (c) Rafael Rodrigues Nakano, <a href="mailto:mseqs@bsd.com.br">mseqs@bsd.com.br</a>, nenhum direito reservado.
        </footer>

        
      </div>
    </div>
  </body>
  
  <script>
        document.getElementById("code").textContent = "JAULA SHOW\n\tCE QUER VER ISSO: \"BORA, \" + CUMPADE + \"!\"\n";
    
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            styleActiveLine: true,
            matchBrackets: true,
            mode:  "javascript",
            theme: "base16-dark"
        });
        
        function random_hex_name(length) {
                var crypto = require("crypto");
                return crypto.randomBytes(Math.ceil(length/2)).toString('hex').slice(0,length);
        }
        
        function execute(name) {
            
        }

        function run_code()
        {
            const name = random_hex_name(30);
            const fs = require("fs");
            const contents = document.getElementById("code").textContent;
            fs.writeFile("text/code-" + name, contents, function(error) {
               if (error != null) {
                   document.getElementById("result").textContent = "Erro, cumpade! " + error;
                   return;
               }
               document.getElementById("result").textContent = execute(name);
            });
        }
    </script>
</html>
